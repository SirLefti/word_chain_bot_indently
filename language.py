from collections import defaultdict
from enum import Enum

from pydantic import BaseModel, Field

from consts import GameMode


def build_regex(start_group: str, middle_group: str, end_group: str) -> str:
    return rf'^({start_group})({middle_group})*({end_group})$'

EN_REGEX: str = build_regex('[a-z]', '[-]|[a-z]', '[a-z]')
FR_REGEX: str = build_regex('[a-zàâæçéèêëîïôœùûüÿ]', '[-]|[a-zàâæçéèêëîïôœùûüÿ]', '[a-zàâæçéèêëîïôœùûüÿ]')
DE_REGEX: str = build_regex('[a-zäöü]', '[-]|[a-zäöüß]', '[a-zäöüß]')
NL_REGEX: str = build_regex('[a-zéèëç]', '[-]|[a-zéèëç]', '[a-zéèëç]')
ES_REGEX: str = build_regex('[a-záéíóúüñ]','[-]|[a-záéíóúüñ]','[a-záéíóúüñ]')
PT_REGEX: str = build_regex('[a-záâãàçéêíóôõú]', '[-]|[a-záâãàçéêíóôõú]', '[a-záâãàçéêíóôõú]')
IT_REGEX: str = build_regex('[a-zàèéìíîòóùú]', '[-]|[a-zàèéìíîòóùú]', '[a-zàèéìíîòóùú]')
NN_REGEX: str = build_regex('[a-zæøå]', '[-]|[a-zæøå]', '[a-zæøå]') # north germanic (danish, norwegian)
SV_REGEX: str = build_regex('[a-zåäö]', '[a-zåäö]', '[a-zåäö]')
IS_REGEX: str = build_regex('[a-záéíóúýþæö]', '[-]|[a-záéíóúýþæöð]', '[a-záéíóúýþæöð]') # icelandic and faroese
PL_REGEX: str = build_regex('[a-ząćęłńóśźż]', '[-]|[a-ząćęłńóśźż]', '[a-ząćęłńóśźż]')
CS_REGEX: str = build_regex('[a-záčďéěíňóřšťůýž]', '[-]|[a-záčďéěíňóřšťůýž]', '[a-záčďéěíňóřšťůýž]')  # czech and slovak
SS_REGEX: str = build_regex('[a-zčćđšž]', '[-]|[a-zčćđšž]', '[a-zčćđšž]')  # south slavic (slovene, croatian, bosnian, serbian)
HU_REGEX: str = build_regex('[a-záéíóöőúüű]', '[-]|[a-záéíóöőúüű]', '[a-záéíóöőúüű]')
RO_REGEX: str = build_regex('[a-zăâîșț]', '[-]|[a-zăâîșț]', '[a-zăâîșț]')
SQ_REGEX: str = build_regex('[a-zëç]', '[-]|[a-zëç]', '[a-zëç]') # albanian
GA_REGEX: str = build_regex('[a-záéíóú]', '[-]|[a-záéíóú]', '[a-záéíóú]')  # irish
GD_REGEX: str = build_regex('[a-zàèìòù]', '[-]|[a-zàèìòù]', '[a-zàèìòù]')  # scottish, gaelic
CY_REGEX: str = build_regex('[a-zâêîôûŷ]', '[-]|[a-zâêîôûŷ]', '[a-zâêîôûŷ]')  # welsh
MT_REGEX: str = build_regex('[a-zċġħż]', '[-]|[a-zċġħż]', '[a-zċġħż]')  # maltese
TR_REGEX: str = build_regex('[a-zçğıöşü]', '[-]|[a-zçğıöşü]', '[a-zçğıöşü]')


EN_FIRST_TOKEN_SCORES: dict[GameMode, dict[str, float]] = {
    GameMode.NORMAL: defaultdict(lambda: 0.0, {
        "a": 1.7856079377646394,
        "b": 1.2935400279399805,
        "c": 2.2556859481353984,
        "d": 1.3160217142826263,
        "e": 0.9973438103756226,
        "f": 0.835475668708573,
        "g": 0.7694357150770511,
        "h": 0.9654479178769939,
        "i": 0.927229051094496,
        "j": 0.19945471102116033,
        "k": 0.27757857106185435,
        "l": 0.7026229534775007,
        "m": 1.3913353635304895,
        "n": 0.9454954212478958,
        "o": 0.8908368213273382,
        "p": 2.449028450682152,
        "q": 0.12589744351881627,
        "r": 1.1790239381321286,
        "s": 2.7233050240624297,
        "t": 1.3220636674872122,
        "u": 1.5993612174697835,
        "v": 0.3743200776050519,
        "w": 0.46073405948459656,
        "x": 0.035549166529308604,
        "y": 0.08023151813531706,
        "z": 0.09737380397158445
    }),
    GameMode.HARD: defaultdict(lambda: 0.0, {
        "aa": 0.02557291821475955,
        "ab": 0.21006325676409632,
        "ac": 0.6247098592462691,
        "ad": 1.70607897232753,
        "ae": 6.073568076005393,
        "af": 0.2045833457180764,
        "ag": 0.32696802574585426,
        "ah": 0.7836272795808462,
        "ai": 0.3233147517151743,
        "aj": 0.021919644184079618,
        "ak": 0.49867190518781124,
        "al": 22.75807057412066,
        "am": 1.2147136152010787,
        "an": 12.65311460525996,
        "ao": 0.1589174203345772,
        "ap": 0.5059784532491711,
        "aq": 0.0073065480613598716,
        "ar": 4.354702644570484,
        "as": 3.98024205642579,
        "at": 1.5672545591616924,
        "au": 0.283128737377695,
        "av": 0.04931919941417913,
        "aw": 0.3927269582980931,
        "ax": 0.3178348406691544,
        "ay": 1.2713393626766176,
        "az": 0.03287946627611942,
        "ba": 0.42012651352819264,
        "bb": 0.02557291821475955,
        "bc": 0.0054799110460199045,
        "bd": 0.00913318507669984,
        "be": 0.5187649123565509,
        "bf": 0.0036532740306799358,
        "bg": 0.0054799110460199045,
        "bh": 0.0036532740306799358,
        "bi": 0.13882441316583757,
        "bj": 0.0036532740306799358,
        "bk": 0.0073065480613598716,
        "bl": 0.021919644184079618,
        "bm": 0.0054799110460199045,
        "bn": 0.0054799110460199045,
        "bo": 0.17170387944195697,
        "bp": 0.0036532740306799358,
        "bq": 0.0,
        "br": 0.00913318507669984,
        "bs": 0.4237797875588726,
        "bt": 0.02557291821475955,
        "bu": 0.06393229553689887,
        "bv": 0.0054799110460199045,
        "bw": 0.0018266370153399679,
        "bx": 0.0036532740306799358,
        "by": 0.35619421799129375,
        "bz": 0.0018266370153399679,
        "ca": 0.8092001977956058,
        "cb": 0.0073065480613598716,
        "cc": 0.0073065480613598716,
        "cd": 0.01826637015339968,
        "ce": 4.889907290065095,
        "cf": 0.010959822092039809,
        "cg": 0.0036532740306799358,
        "ch": 2.2175373366227213,
        "ci": 0.20640998273341638,
        "cj": 0.0,
        "ck": 2.721689152856552,
        "cl": 0.02557291821475955,
        "cm": 0.0073065480613598716,
        "cn": 0.0036532740306799358,
        "co": 0.42743306158955247,
        "cp": 0.0036532740306799358,
        "cq": 0.0036532740306799358,
        "cr": 0.0054799110460199045,
        "cs": 1.771837904879769,
        "ct": 1.0905022981579608,
        "cu": 0.04931919941417913,
        "cv": 0.0018266370153399679,
        "cw": 0.0018266370153399679,
        "cx": 0.0,
        "cy": 2.2577233509602004,
        "cz": 0.0,
        "da": 1.0137835435136822,
        "db": 0.0018266370153399679,
        "dc": 0.0036532740306799358,
        "dd": 0.04931919941417913,
        "de": 3.7226862372628546,
        "df": 0.0018266370153399679,
        "dg": 0.012786459107379775,
        "dh": 0.029226192245439486,
        "di": 0.25755581916293546,
        "dj": 0.0054799110460199045,
        "dk": 0.0018266370153399679,
        "dl": 0.012786459107379775,
        "dm": 0.0054799110460199045,
        "dn": 0.029226192245439486,
        "do": 0.6210565852155892,
        "dp": 0.0073065480613598716,
        "dq": 0.0018266370153399679,
        "dr": 0.01643973313805971,
        "ds": 3.530889350652158,
        "dt": 0.020093007168739647,
        "du": 0.06027902150621894,
        "dv": 0.0036532740306799358,
        "dw": 0.0,
        "dx": 0.0018266370153399679,
        "dy": 0.8968787745319242,
        "dz": 0.010959822092039809,
        "ea": 1.5124554487014934,
        "eb": 0.08037202867495859,
        "ec": 0.14430432421185746,
        "ed": 40.911189232569264,
        "ee": 1.8723029407234673,
        "ef": 0.17535715347263695,
        "eg": 0.16987724242661703,
        "eh": 0.13334450211981766,
        "ei": 0.2356361749788559,
        "ej": 0.0018266370153399679,
        "ek": 0.17535715347263695,
        "el": 2.2558967139448605,
        "em": 0.36898067709867355,
        "en": 5.0451714363689915,
        "eo": 0.08767857673631847,
        "ep": 0.284955374393035,
        "eq": 0.012786459107379775,
        "er": 27.501846902958558,
        "es": 31.825496718268262,
        "et": 3.4486906849618593,
        "eu": 0.06941220658291879,
        "ev": 0.03470610329145939,
        "ew": 0.3726339511293535,
        "ex": 0.36532740306799355,
        "ey": 1.0430097357591217,
        "ez": 0.07123884359825874,
        "fa": 0.06575893255223884,
        "fb": 0.0054799110460199045,
        "fc": 0.0036532740306799358,
        "fd": 0.020093007168739647,
        "fe": 0.25938245617827543,
        "ff": 0.5224181863872308,
        "fg": 0.0054799110460199045,
        "fh": 0.0054799110460199045,
        "fi": 0.02557291821475955,
        "fj": 0.0,
        "fk": 0.0,
        "fl": 0.00913318507669984,
        "fm": 0.0073065480613598716,
        "fn": 0.0018266370153399679,
        "fo": 0.043839288368159236,
        "fp": 0.0018266370153399679,
        "fq": 0.0,
        "fr": 0.00913318507669984,
        "fs": 0.44935270577363207,
        "ft": 0.56991074878607,
        "fu": 0.021919644184079618,
        "fv": 0.0018266370153399679,
        "fw": 0.0018266370153399679,
        "fx": 0.0054799110460199045,
        "fy": 1.088675661142621,
        "fz": 0.0054799110460199045,
        "ga": 0.5333780084792706,
        "gb": 0.0,
        "gc": 0.0,
        "gd": 0.012786459107379775,
        "ge": 3.295253175673302,
        "gf": 0.0018266370153399679,
        "gg": 0.040186014337479294,
        "gh": 0.36898067709867355,
        "gi": 0.18083706451865683,
        "gj": 0.0,
        "gk": 0.0018266370153399679,
        "gl": 0.0073065480613598716,
        "gm": 0.040186014337479294,
        "gn": 0.16987724242661703,
        "go": 0.42560642457421255,
        "gp": 0.0018266370153399679,
        "gq": 0.0,
        "gr": 0.01826637015339968,
        "gs": 2.517105807138476,
        "gt": 0.02557291821475955,
        "gu": 0.043839288368159236,
        "gv": 0.0018266370153399679,
        "gw": 0.0,
        "gx": 0.0,
        "gy": 2.3746281199419585,
        "gz": 0.0,
        "ha": 0.6722024216451082,
        "hb": 0.0054799110460199045,
        "hc": 0.0,
        "hd": 0.012786459107379775,
        "he": 0.803720286749586,
        "hf": 0.0036532740306799358,
        "hg": 0.0054799110460199045,
        "hh": 0.0054799110460199045,
        "hi": 0.4146466024821727,
        "hj": 0.0,
        "hk": 0.0018266370153399679,
        "hl": 0.01826637015339968,
        "hm": 0.08219866569029856,
        "hn": 0.02557291821475955,
        "ho": 0.22102307885613612,
        "hp": 0.0073065480613598716,
        "hq": 0.0018266370153399679,
        "hr": 0.03287946627611942,
        "hs": 1.0941555721886407,
        "ht": 1.0101302694830023,
        "hu": 0.05845238449087897,
        "hv": 0.0036532740306799358,
        "hw": 0.0018266370153399679,
        "hx": 0.0,
        "hy": 2.3545351127732186,
        "hz": 0.0018266370153399679,
        "ia": 10.523255845373555,
        "ib": 0.1315178651044777,
        "ic": 23.85039950929396,
        "id": 5.894557648502077,
        "ie": 1.947195058352406,
        "if": 0.11325149495107802,
        "ig": 0.2228497158714761,
        "ih": 0.02557291821475955,
        "ii": 0.24476936005555572,
        "ij": 0.0054799110460199045,
        "ik": 0.27216891528565523,
        "il": 1.5435082779622729,
        "im": 0.516938275341211,
        "in": 6.406016012797268,
        "io": 0.4858854460804315,
        "ip": 2.3253089205277795,
        "iq": 0.00913318507669984,
        "ir": 0.5333780084792706,
        "is": 8.52126167656095,
        "it": 1.589174203345772,
        "iu": 0.020093007168739647,
        "iv": 0.05297247344485907,
        "iw": 0.0018266370153399679,
        "ix": 0.4804055350344116,
        "iy": 0.0036532740306799358,
        "iz": 0.045665925383499194,
        "ja": 0.11142485793573804,
        "jb": 0.0,
        "jc": 0.0036532740306799358,
        "jd": 0.0036532740306799358,
        "je": 0.040186014337479294,
        "jf": 0.0,
        "jg": 0.0018266370153399679,
        "jh": 0.0,
        "ji": 0.054799110460199044,
        "jj": 0.0018266370153399679,
        "jk": 0.0018266370153399679,
        "jl": 0.0018266370153399679,
        "jm": 0.0,
        "jn": 0.0,
        "jo": 0.042012651352819265,
        "jp": 0.0,
        "jq": 0.0,
        "jr": 0.0018266370153399679,
        "js": 0.0036532740306799358,
        "jt": 0.0036532740306799358,
        "ju": 0.012786459107379775,
        "jv": 0.0,
        "jw": 0.0,
        "jx": 0.0,
        "jy": 0.0036532740306799358,
        "jz": 0.0,
        "ka": 0.456659253834992,
        "kb": 0.0018266370153399679,
        "kc": 0.0018266370153399679,
        "kd": 0.0,
        "ke": 3.7646988886156736,
        "kf": 0.0036532740306799358,
        "kg": 0.0073065480613598716,
        "kh": 0.029226192245439486,
        "ki": 0.21919644184079617,
        "kj": 0.0,
        "kk": 0.0018266370153399679,
        "kl": 0.0036532740306799358,
        "km": 0.0036532740306799358,
        "kn": 0.0018266370153399679,
        "ko": 0.1260379540584578,
        "kp": 0.0,
        "kq": 0.0,
        "kr": 0.0054799110460199045,
        "ks": 2.1462984930244624,
        "kt": 0.03287946627611942,
        "ku": 0.06941220658291879,
        "kv": 0.0018266370153399679,
        "kw": 0.0054799110460199045,
        "kx": 0.0,
        "ky": 0.6393229553689889,
        "kz": 0.0,
        "la": 2.506145985046436,
        "lb": 0.021919644184079618,
        "lc": 0.020093007168739647,
        "ld": 0.8384263900410454,
        "le": 17.13568184090424,
        "lf": 0.11690476898175794,
        "lg": 0.010959822092039809,
        "lh": 0.0036532740306799358,
        "li": 0.8055469237649259,
        "lj": 0.0,
        "lk": 0.27216891528565523,
        "ll": 1.9088356810302667,
        "lm": 0.13334450211981766,
        "ln": 0.029226192245439486,
        "lo": 0.511458364295191,
        "lp": 0.09133185076699839,
        "lq": 0.0,
        "lr": 0.014613096122719743,
        "ls": 3.6569273047106154,
        "lt": 0.6320164073076289,
        "lu": 0.06941220658291879,
        "lv": 0.0073065480613598716,
        "lw": 0.0036532740306799358,
        "lx": 0.012786459107379775,
        "ly": 30.484745149008724,
        "lz": 0.00913318507669984,
        "ma": 2.1937910554233016,
        "mb": 0.1991034346720565,
        "mc": 0.0018266370153399679,
        "md": 0.010959822092039809,
        "me": 2.6394904871662535,
        "mf": 0.00913318507669984,
        "mg": 0.0036532740306799358,
        "mh": 0.00913318507669984,
        "mi": 0.2502492711015756,
        "mj": 0.0,
        "mk": 0.0073065480613598716,
        "ml": 0.010959822092039809,
        "mm": 0.027399555230099522,
        "mn": 0.07854539165961862,
        "mo": 0.2228497158714761,
        "mp": 0.3507143069452739,
        "mq": 0.0,
        "mr": 0.0054799110460199045,
        "ms": 2.520759081169156,
        "mt": 0.021919644184079618,
        "mu": 0.03835937732213933,
        "mv": 0.0036532740306799358,
        "mw": 0.0018266370153399679,
        "mx": 0.0,
        "my": 1.932581962229686,
        "mz": 0.0,
        "na": 2.007474079858625,
        "nb": 0.0036532740306799358,
        "nc": 0.05297247344485907,
        "nd": 2.3673215718805984,
        "ne": 10.406351076391799,
        "nf": 0.0054799110460199045,
        "ng": 34.10879298744322,
        "nh": 0.010959822092039809,
        "ni": 0.5315513714639306,
        "nj": 0.00913318507669984,
        "nk": 0.5571242896786902,
        "nl": 0.014613096122719743,
        "nm": 0.0054799110460199045,
        "nn": 0.08767857673631847,
        "no": 0.57356402281675,
        "np": 0.0036532740306799358,
        "nq": 0.0,
        "nr": 0.0036532740306799358,
        "ns": 8.155934273492957,
        "nt": 10.488549742082096,
        "nu": 0.06210565852155891,
        "nv": 0.014613096122719743,
        "nw": 0.0,
        "nx": 0.08950521375165843,
        "ny": 1.4028572277810956,
        "nz": 0.012786459107379775,
        "oa": 0.24659599707089566,
        "ob": 0.1662239683959371,
        "oc": 0.12238468002777786,
        "od": 1.8028907341405485,
        "oe": 0.2155431678101162,
        "of": 0.8128534718262858,
        "og": 0.3361012108225541,
        "oh": 0.03835937732213933,
        "oi": 0.22650298990215603,
        "oj": 0.0,
        "ok": 0.46396580189635184,
        "ol": 1.433910057041875,
        "om": 1.3736310355356558,
        "on": 20.257404500120245,
        "oo": 0.341581121868574,
        "op": 0.6539360514917085,
        "oq": 0.0054799110460199045,
        "or": 4.1482926618370675,
        "os": 2.581038102675375,
        "ot": 1.5818676552844122,
        "ou": 0.1771837904879769,
        "ov": 0.031052829260779454,
        "ow": 0.9187984187160039,
        "ox": 0.2758221893163351,
        "oy": 0.3854204102367333,
        "oz": 0.029226192245439486,
        "pa": 0.29408855946973483,
        "pb": 0.0054799110460199045,
        "pc": 0.0036532740306799358,
        "pd": 0.01643973313805971,
        "pe": 1.7079056093428702,
        "pf": 0.012786459107379775,
        "pg": 0.0073065480613598716,
        "ph": 1.1763542378789393,
        "pi": 0.14065105018117754,
        "pj": 0.0,
        "pk": 0.0054799110460199045,
        "pl": 0.02557291821475955,
        "pm": 0.020093007168739647,
        "pn": 0.0054799110460199045,
        "po": 0.1022916728590382,
        "pp": 0.031052829260779454,
        "pq": 0.0018266370153399679,
        "pr": 0.01826637015339968,
        "ps": 1.5727344702077126,
        "pt": 0.4913653571264514,
        "pu": 0.031052829260779454,
        "pv": 0.0036532740306799358,
        "pw": 0.0018266370153399679,
        "px": 0.0018266370153399679,
        "py": 1.1051153942806806,
        "pz": 0.0,
        "qa": 0.0036532740306799358,
        "qb": 0.0,
        "qc": 0.0,
        "qd": 0.0036532740306799358,
        "qe": 0.0018266370153399679,
        "qf": 0.0,
        "qg": 0.0,
        "qh": 0.0036532740306799358,
        "qi": 0.0018266370153399679,
        "qj": 0.0,
        "qk": 0.0,
        "ql": 0.0018266370153399679,
        "qm": 0.0018266370153399679,
        "qn": 0.0036532740306799358,
        "qo": 0.0,
        "qp": 0.0018266370153399679,
        "qq": 0.0036532740306799358,
        "qr": 0.0018266370153399679,
        "qs": 0.0054799110460199045,
        "qt": 0.0018266370153399679,
        "qu": 0.010959822092039809,
        "qv": 0.0036532740306799358,
        "qw": 0.0,
        "qx": 0.0,
        "qy": 0.0018266370153399679,
        "qz": 0.0,
        "ra": 2.4787464298163364,
        "rb": 0.13517113913515763,
        "rc": 0.045665925383499194,
        "rd": 2.3746281199419585,
        "re": 5.12371682802861,
        "rf": 0.08767857673631847,
        "rg": 0.12421131704311782,
        "rh": 0.014613096122719743,
        "ri": 0.7562277243507467,
        "rj": 0.0018266370153399679,
        "rk": 0.9809040772375628,
        "rl": 0.22650298990215603,
        "rm": 2.1883111443772814,
        "rn": 0.9626377070841631,
        "ro": 0.5973103040161695,
        "rp": 0.19545016064137657,
        "rq": 0.0,
        "rr": 0.11507813196641797,
        "rs": 11.752582556697353,
        "rt": 1.6147471215605318,
        "ru": 0.1077715839050581,
        "rv": 0.01643973313805971,
        "rw": 0.0054799110460199045,
        "rx": 0.00913318507669984,
        "ry": 8.879282531567585,
        "rz": 0.01643973313805971,
        "sa": 0.5023251792184912,
        "sb": 0.0036532740306799358,
        "sc": 0.05297247344485907,
        "sd": 0.0054799110460199045,
        "se": 6.944873932322558,
        "sf": 0.00913318507669984,
        "sg": 0.00913318507669984,
        "sh": 4.210398320358626,
        "si": 0.2502492711015756,
        "sj": 0.0,
        "sk": 0.22650298990215603,
        "sl": 0.010959822092039809,
        "sm": 7.512958044093288,
        "sn": 0.021919644184079618,
        "so": 0.23746281199419583,
        "sp": 0.10046503584369824,
        "sq": 0.0036532740306799358,
        "sr": 0.0073065480613598716,
        "ss": 22.902374898332518,
        "st": 12.450357896557222,
        "su": 0.07854539165961862,
        "sv": 0.0036532740306799358,
        "sw": 0.00913318507669984,
        "sx": 0.0,
        "sy": 0.7196949840439474,
        "sz": 0.0073065480613598716,
        "ta": 2.3070425503743794,
        "tb": 0.0036532740306799358,
        "tc": 0.00913318507669984,
        "td": 0.029226192245439486,
        "te": 19.34043271841958,
        "tf": 0.0018266370153399679,
        "tg": 0.01826637015339968,
        "th": 1.9819011616438653,
        "ti": 0.5753906598320899,
        "tj": 0.0,
        "tk": 0.0036532740306799358,
        "tl": 0.054799110460199044,
        "tm": 0.0054799110460199045,
        "tn": 0.021919644184079618,
        "to": 0.8329464789950253,
        "tp": 0.0036532740306799358,
        "tq": 0.0,
        "tr": 0.03287946627611942,
        "ts": 8.0481626895879,
        "tt": 0.17170387944195697,
        "tu": 0.1022916728590382,
        "tv": 0.0018266370153399679,
        "tw": 0.0018266370153399679,
        "tx": 0.0054799110460199045,
        "ty": 9.164237905960618,
        "tz": 0.12421131704311782,
        "ua": 0.24294272304021575,
        "ub": 0.15161087227321735,
        "uc": 0.031052829260779454,
        "ud": 0.24111608602487575,
        "ue": 1.371804398520316,
        "uf": 0.031052829260779454,
        "ug": 0.17170387944195697,
        "uh": 0.023746281199419583,
        "ui": 0.09863839882835826,
        "uj": 0.0018266370153399679,
        "uk": 0.1589174203345772,
        "ul": 2.1444718560091225,
        "um": 5.352046454946105,
        "un": 0.3744605881446934,
        "uo": 0.01826637015339968,
        "up": 0.3854204102367333,
        "uq": 0.0018266370153399679,
        "ur": 1.0320499136670818,
        "us": 18.75956214754147,
        "ut": 0.9681176181301829,
        "uu": 0.0036532740306799358,
        "uv": 0.00913318507669984,
        "uw": 0.012786459107379775,
        "ux": 0.21006325676409632,
        "uy": 0.0968117618130183,
        "uz": 0.023746281199419583,
        "va": 0.283128737377695,
        "vb": 0.0018266370153399679,
        "vc": 0.0036532740306799358,
        "vd": 0.0054799110460199045,
        "ve": 6.522920781779026,
        "vf": 0.0,
        "vg": 0.0054799110460199045,
        "vh": 0.0018266370153399679,
        "vi": 0.08037202867495859,
        "vj": 0.0,
        "vk": 0.0,
        "vl": 0.0018266370153399679,
        "vm": 0.0,
        "vn": 0.0054799110460199045,
        "vo": 0.07123884359825874,
        "vp": 0.0036532740306799358,
        "vq": 0.0,
        "vr": 0.00913318507669984,
        "vs": 0.027399555230099522,
        "vt": 0.010959822092039809,
        "vu": 0.00913318507669984,
        "vv": 0.0018266370153399679,
        "vw": 0.0018266370153399679,
        "vx": 0.0,
        "vy": 0.1424776871965175,
        "vz": 0.0,
        "wa": 0.12786459107379775,
        "wb": 0.0018266370153399679,
        "wc": 0.0018266370153399679,
        "wd": 0.0511458364295191,
        "we": 0.07306548061359872,
        "wf": 0.00913318507669984,
        "wg": 0.0018266370153399679,
        "wh": 0.0036532740306799358,
        "wi": 0.042012651352819265,
        "wj": 0.0,
        "wk": 0.08585193972097849,
        "wl": 0.17170387944195697,
        "wm": 0.01643973313805971,
        "wn": 0.5187649123565509,
        "wo": 0.010959822092039809,
        "wp": 0.014613096122719743,
        "wq": 0.0,
        "wr": 0.0036532740306799358,
        "ws": 0.6356696813383088,
        "wt": 0.040186014337479294,
        "wu": 0.0054799110460199045,
        "wv": 0.0,
        "ww": 0.0,
        "wx": 0.0,
        "wy": 0.12055804301243787,
        "wz": 0.0,
        "xa": 0.03470610329145939,
        "xb": 0.0,
        "xc": 0.0036532740306799358,
        "xd": 0.0036532740306799358,
        "xe": 0.05845238449087897,
        "xf": 0.0,
        "xg": 0.0,
        "xh": 0.0,
        "xi": 0.020093007168739647,
        "xj": 0.0,
        "xk": 0.0,
        "xl": 0.0018266370153399679,
        "xm": 0.0,
        "xn": 0.0,
        "xo": 0.010959822092039809,
        "xp": 0.0018266370153399679,
        "xq": 0.0,
        "xr": 0.0036532740306799358,
        "xs": 0.0073065480613598716,
        "xt": 0.07306548061359872,
        "xu": 0.0018266370153399679,
        "xv": 0.0018266370153399679,
        "xw": 0.0018266370153399679,
        "xx": 0.0054799110460199045,
        "xy": 0.284955374393035,
        "xz": 0.0,
        "ya": 0.32148811469983435,
        "yb": 0.0,
        "yc": 0.010959822092039809,
        "yd": 0.03835937732213933,
        "ye": 0.2392894490095358,
        "yf": 0.0018266370153399679,
        "yg": 0.0054799110460199045,
        "yh": 0.0018266370153399679,
        "yi": 0.014613096122719743,
        "yj": 0.0,
        "yk": 0.00913318507669984,
        "yl": 0.7982403757035659,
        "ym": 0.1022916728590382,
        "yn": 0.11507813196641797,
        "yo": 0.06210565852155891,
        "yp": 0.01826637015339968,
        "yq": 0.0,
        "yr": 0.0511458364295191,
        "ys": 1.318831925075457,
        "yt": 0.021919644184079618,
        "yu": 0.021919644184079618,
        "yv": 0.0,
        "yw": 0.0,
        "yx": 0.08950521375165843,
        "yy": 0.0018266370153399679,
        "yz": 0.00913318507669984,
        "za": 0.2118898937794363,
        "zb": 0.0,
        "zc": 0.0,
        "zd": 0.0036532740306799358,
        "ze": 5.072570991599091,
        "zf": 0.0,
        "zg": 0.0,
        "zh": 0.0018266370153399679,
        "zi": 0.06210565852155891,
        "zj": 0.0,
        "zk": 0.0,
        "zl": 0.0036532740306799358,
        "zm": 0.0018266370153399679,
        "zn": 0.0054799110460199045,
        "zo": 0.12786459107379775,
        "zp": 0.0,
        "zq": 0.0,
        "zr": 0.0,
        "zs": 0.0036532740306799358,
        "zt": 0.0018266370153399679,
        "zu": 0.00913318507669984,
        "zv": 0.0,
        "zw": 0.0,
        "zx": 0.0,
        "zy": 0.16439733138059712,
        "zz": 0.05662574747553901
    })
}
"""
This dictionary maps for each game mode each valid token to its frequency as the first token in an english word. It is
calculated by multiplying the frequency with the total token count. This results in scores around 1, with scores below 1
meaning that this token occurs less than average as the first token, and scores above 1 meaning that this token occurs
more than average as the first token.

Other languages will have their own score maps.
"""

class LanguageInfo(BaseModel):
    code: str = Field(max_length=2, min_length=2)
    allowed_word_regex: str
    first_token_scores: dict[GameMode, dict[str, float]] = Field(default=EN_FIRST_TOKEN_SCORES)  # fallback to english

class Language(Enum):
    """
    An enumeration of the languages supported by the bot.
    """
    # Latin script
    ENGLISH = LanguageInfo(code="en", allowed_word_regex=EN_REGEX, first_token_scores=EN_FIRST_TOKEN_SCORES)
    FRENCH = LanguageInfo(code='fr', allowed_word_regex=FR_REGEX)
    GERMAN = LanguageInfo(code='de', allowed_word_regex=DE_REGEX)
    DUTCH = LanguageInfo(code='nl', allowed_word_regex=NL_REGEX)
    LUXEMBOURGISH = LanguageInfo(code='lb', allowed_word_regex=DE_REGEX)
    SPANISH = LanguageInfo(code='es', allowed_word_regex=ES_REGEX)
    PORTUGUESE = LanguageInfo(code='pt', allowed_word_regex=PT_REGEX)
    ITALIAN = LanguageInfo(code='it', allowed_word_regex=IT_REGEX)
    CATALAN = LanguageInfo(code='ca', allowed_word_regex=FR_REGEX)
    GALICIAN = LanguageInfo(code='gl', allowed_word_regex=FR_REGEX)
    DANISH = LanguageInfo(code='da', allowed_word_regex=NN_REGEX)
    NORWEGIAN = LanguageInfo(code='no', allowed_word_regex=NN_REGEX)
    SWEDISH = LanguageInfo(code='sv', allowed_word_regex=SV_REGEX)
    ICELANDIC = LanguageInfo(code='is', allowed_word_regex=IS_REGEX)
    FAROESE = LanguageInfo(code='fo', allowed_word_regex=IS_REGEX)
    POLISH = LanguageInfo(code='pl', allowed_word_regex=PL_REGEX)
    CZECH = LanguageInfo(code='cs', allowed_word_regex=CS_REGEX)
    SLOVAK = LanguageInfo(code='sk', allowed_word_regex=CS_REGEX)
    SLOVENE = LanguageInfo(code='sl', allowed_word_regex=SS_REGEX)
    CROATIAN = LanguageInfo(code='hr', allowed_word_regex=SS_REGEX)
    BOSNIAN = LanguageInfo(code='bs', allowed_word_regex=SS_REGEX)
    SERBIAN = LanguageInfo(code='sr', allowed_word_regex=SS_REGEX)
    HUNGARIAN = LanguageInfo(code='hu', allowed_word_regex=HU_REGEX)
    ROMANIAN = LanguageInfo(code='ro', allowed_word_regex=RO_REGEX)
    ALBANIAN = LanguageInfo(code='sq', allowed_word_regex=SQ_REGEX)
    IRISH = LanguageInfo(code='ga', allowed_word_regex=GA_REGEX)
    SCOTTISH_GAELIC = LanguageInfo(code='gd', allowed_word_regex=GD_REGEX)
    WELSH = LanguageInfo(code='cy', allowed_word_regex=CY_REGEX)
    BRETON = LanguageInfo(code='br', allowed_word_regex=FR_REGEX)
    BASQUE = LanguageInfo(code='eu', allowed_word_regex=ES_REGEX)
    MALTESE = LanguageInfo(code='mt', allowed_word_regex=MT_REGEX)
    TURKISH = LanguageInfo(code='tr', allowed_word_regex=TR_REGEX)

    @classmethod
    def from_language_code(cls, code: str):
        matches = [e for e in cls if e.value.code == code]
        if matches:
            return matches[0]
        else:
            raise ValueError(f'no language found for code "{code}"')
