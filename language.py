from collections import defaultdict
from enum import Enum

from pydantic import BaseModel, Field

from consts import GameMode


def build_regex(start_group: str, middle_group: str, end_group: str) -> str:
    return rf'^({start_group})({middle_group})*({end_group})$'

EN_REGEX: str = build_regex('[a-z]', '[-]|[a-z]', '[a-z]')
FR_REGEX: str = build_regex('[a-zàâæçéèêëîïôœùûüÿ]', '[-]|[a-zàâæçéèêëîïôœùûüÿ]', '[a-zàâæçéèêëîïôœùûüÿ]')
DE_REGEX: str = build_regex('[a-zäöü]', '[-]|[a-zäöüß]', '[a-zäöüß]')
NL_REGEX: str = build_regex('[a-zéèëç]', '[-]|[a-zéèëç]', '[a-zéèëç]')
ES_REGEX: str = build_regex('[a-záéíóúüñ]','[-]|[a-záéíóúüñ]','[a-záéíóúüñ]')
PT_REGEX: str = build_regex('[a-záâãàçéêíóôõú]', '[-]|[a-záâãàçéêíóôõú]', '[a-záâãàçéêíóôõú]')
IT_REGEX: str = build_regex('[a-zàèéìíîòóùú]', '[-]|[a-zàèéìíîòóùú]', '[a-zàèéìíîòóùú]')
NN_REGEX: str = build_regex('[a-zæøå]', '[-]|[a-zæøå]', '[a-zæøå]') # north germanic (danish, norwegian)
SV_REGEX: str = build_regex('[a-zåäö]', '[a-zåäö]', '[a-zåäö]')
IS_REGEX: str = build_regex('[a-záéíóúýþæö]', '[-]|[a-záéíóúýþæöð]', '[a-záéíóúýþæöð]') # icelandic and faroese
PL_REGEX: str = build_regex('[a-ząćęłńóśźż]', '[-]|[a-ząćęłńóśźż]', '[a-ząćęłńóśźż]')
CS_REGEX: str = build_regex('[a-záčďéěíňóřšťůýž]', '[-]|[a-záčďéěíňóřšťůýž]', '[a-záčďéěíňóřšťůýž]')  # czech and slovak
SS_REGEX: str = build_regex('[a-zčćđšž]', '[-]|[a-zčćđšž]', '[a-zčćđšž]')  # south slavic (slovene, croatian, bosnian, serbian)
HU_REGEX: str = build_regex('[a-záéíóöőúüű]', '[-]|[a-záéíóöőúüű]', '[a-záéíóöőúüű]')
RO_REGEX: str = build_regex('[a-zăâîșț]', '[-]|[a-zăâîșț]', '[a-zăâîșț]')
SQ_REGEX: str = build_regex('[a-zëç]', '[-]|[a-zëç]', '[a-zëç]') # albanian
GA_REGEX: str = build_regex('[a-záéíóú]', '[-]|[a-záéíóú]', '[a-záéíóú]')  # irish
GD_REGEX: str = build_regex('[a-zàèìòù]', '[-]|[a-zàèìòù]', '[a-zàèìòù]')  # scottish, gaelic
CY_REGEX: str = build_regex('[a-zâêîôûŷ]', '[-]|[a-zâêîôûŷ]', '[a-zâêîôûŷ]')  # welsh
MT_REGEX: str = build_regex('[a-zċġħż]', '[-]|[a-zċġħż]', '[a-zċġħż]')  # maltese
TR_REGEX: str = build_regex('[a-zçğıöşü]', '[-]|[a-zçğıöşü]', '[a-zçğıöşü]')


EN_FIRST_TOKEN_SCORES: dict[GameMode, dict[str, float]] = {
    GameMode.NORMAL: defaultdict(lambda: 0.0, {
        "a": 1.7856079377646394,
        "b": 1.2935400279399805,
        "c": 2.2556859481353984,
        "d": 1.3160217142826263,
        "e": 0.9973438103756226,
        "f": 0.835475668708573,
        "g": 0.7694357150770511,
        "h": 0.9654479178769939,
        "i": 0.927229051094496,
        "j": 0.19945471102116033,
        "k": 0.27757857106185435,
        "l": 0.7026229534775007,
        "m": 1.3913353635304895,
        "n": 0.9454954212478958,
        "o": 0.8908368213273382,
        "p": 2.449028450682152,
        "q": 0.12589744351881627,
        "r": 1.1790239381321286,
        "s": 2.7233050240624297,
        "t": 1.3220636674872122,
        "u": 1.5993612174697835,
        "v": 0.3743200776050519,
        "w": 0.46073405948459656,
        "x": 0.035549166529308604,
        "y": 0.08023151813531706,
        "z": 0.09737380397158445
    }),
    GameMode.HARD: defaultdict(lambda: 0.0, {
        "aa": 0.0511458364295191,
        "ab": 2.153605041085822,
        "ac": 3.99120187851783,
        "ad": 2.4769197928009965,
        "ae": 0.9388914258847436,
        "af": 1.0083036324676624,
        "ag": 1.4686161603333343,
        "ah": 0.11873140599709792,
        "ai": 0.6411495923843288,
        "aj": 0.045665925383499194,
        "ak": 0.20275670870273646,
        "al": 4.55928599028856,
        "am": 3.1673885845995047,
        "an": 9.348728244509957,
        "ao": 0.09133185076699839,
        "ap": 2.813021003623551,
        "aq": 0.24659599707089566,
        "ar": 4.650617841055559,
        "as": 2.8038878185468508,
        "at": 1.536201729900913,
        "au": 2.456826785632257,
        "av": 0.6521094144763685,
        "aw": 0.284955374393035,
        "ax": 0.2666890042396353,
        "ay": 0.08767857673631847,
        "az": 0.3635007660526536,
        "ba": 7.118404448779856,
        "bb": 0.0073065480613598716,
        "bc": 0.0073065480613598716,
        "bd": 0.042012651352819265,
        "be": 6.791436423034001,
        "bf": 0.0018266370153399679,
        "bg": 0.0018266370153399679,
        "bh": 0.12238468002777786,
        "bi": 3.8816036575974318,
        "bj": 0.0018266370153399679,
        "bk": 0.01826637015339968,
        "bl": 2.743608797040632,
        "bm": 0.0018266370153399679,
        "bn": 0.0036532740306799358,
        "bo": 4.387582110846603,
        "bp": 0.0073065480613598716,
        "bq": 0.0,
        "br": 4.6926304924083775,
        "bs": 0.0073065480613598716,
        "bt": 0.00913318507669984,
        "bu": 3.5034897954220585,
        "bv": 0.0036532740306799358,
        "bw": 0.0036532740306799358,
        "bx": 0.0036532740306799358,
        "by": 0.2685156412549753,
        "bz": 0.0018266370153399679,
        "ca": 11.787288659988812,
        "cb": 0.0018266370153399679,
        "cc": 0.01826637015339968,
        "cd": 0.0073065480613598716,
        "ce": 2.7618751671940314,
        "cf": 0.010959822092039809,
        "cg": 0.0054799110460199045,
        "ch": 9.069252781162941,
        "ci": 2.0750596494262035,
        "cj": 0.0,
        "ck": 0.0036532740306799358,
        "cl": 3.269680257458543,
        "cm": 0.00913318507669984,
        "cn": 0.054799110460199044,
        "co": 20.02542159917207,
        "cp": 0.020093007168739647,
        "cq": 0.0018266370153399679,
        "cr": 4.694457129423718,
        "cs": 0.023746281199419583,
        "ct": 0.08037202867495859,
        "cu": 2.734475611963932,
        "cv": 0.0018266370153399679,
        "cw": 0.010959822092039809,
        "cx": 0.0,
        "cy": 1.9143155920762864,
        "cz": 0.06575893255223884,
        "da": 2.6522769462736333,
        "db": 0.00913318507669984,
        "dc": 0.014613096122719743,
        "dd": 0.0054799110460199045,
        "de": 11.816514852234253,
        "df": 0.0036532740306799358,
        "dg": 0.0054799110460199045,
        "dh": 0.1424776871965175,
        "di": 11.30322985092372,
        "dj": 0.04931919941417913,
        "dk": 0.00913318507669984,
        "dl": 0.0054799110460199045,
        "dm": 0.0054799110460199045,
        "dn": 0.0036532740306799358,
        "do": 3.459650507053899,
        "dp": 0.0036532740306799358,
        "dq": 0.0,
        "dr": 2.1937910554233016,
        "ds": 0.01643973313805971,
        "dt": 0.0073065480613598716,
        "du": 1.777317815925789,
        "dv": 0.00913318507669984,
        "dw": 0.08219866569029856,
        "dx": 0.0018266370153399679,
        "dy": 0.626536496261609,
        "dz": 0.012786459107379775,
        "ea": 0.5826972078934498,
        "eb": 0.14978423525787737,
        "ec": 1.0375298247131017,
        "ed": 0.4438727947276122,
        "ee": 0.09133185076699839,
        "ef": 0.37811386217537335,
        "eg": 0.31418156663847446,
        "eh": 0.01826637015339968,
        "ei": 0.19545016064137657,
        "ej": 0.07671875464427866,
        "ek": 0.05662574747553901,
        "el": 2.2522434399141806,
        "em": 2.0147806279199845,
        "en": 5.363006277038147,
        "eo": 0.11690476898175794,
        "ep": 2.1225522118250426,
        "eq": 0.56991074878607,
        "er": 1.13616822354146,
        "es": 1.2877790958146775,
        "et": 0.8439063010870652,
        "eu": 1.2348066223698182,
        "ev": 0.7781473685348264,
        "ew": 0.029226192245439486,
        "ex": 4.55745935327322,
        "ey": 0.27034227827031526,
        "ez": 0.00913318507669984,
        "fa": 3.1052829260779458,
        "fb": 0.0036532740306799358,
        "fc": 0.014613096122719743,
        "fd": 0.00913318507669984,
        "fe": 2.444040326524877,
        "ff": 0.0036532740306799358,
        "fg": 0.0054799110460199045,
        "fh": 0.0018266370153399679,
        "fi": 3.1162427481699853,
        "fj": 0.014613096122719743,
        "fk": 0.0,
        "fl": 3.6112613793271167,
        "fm": 0.0036532740306799358,
        "fn": 0.0054799110460199045,
        "fo": 4.53553970908914,
        "fp": 0.00913318507669984,
        "fq": 0.0,
        "fr": 2.8806065731911294,
        "fs": 0.0054799110460199045,
        "ft": 0.00913318507669984,
        "fu": 1.9088356810302667,
        "fv": 0.0018266370153399679,
        "fw": 0.0054799110460199045,
        "fx": 0.0,
        "fy": 0.02557291821475955,
        "fz": 0.0018266370153399679,
        "ga": 4.119066469591628,
        "gb": 0.0,
        "gc": 0.0054799110460199045,
        "gd": 0.0054799110460199045,
        "ge": 2.6431437611969337,
        "gf": 0.0,
        "gg": 0.0018266370153399679,
        "gh": 0.2557291821475955,
        "gi": 1.311525377014097,
        "gj": 0.0054799110460199045,
        "gk": 0.0,
        "gl": 2.339922016650499,
        "gm": 0.0054799110460199045,
        "gn": 0.283128737377695,
        "go": 2.3417486536658387,
        "gp": 0.014613096122719743,
        "gq": 0.0,
        "gr": 3.98024205642579,
        "gs": 0.0018266370153399679,
        "gt": 0.012786459107379775,
        "gu": 1.932581962229686,
        "gv": 0.0018266370153399679,
        "gw": 0.027399555230099522,
        "gx": 0.0,
        "gy": 0.7160417100132674,
        "gz": 0.0,
        "ha": 5.2059154937189085,
        "hb": 0.0018266370153399679,
        "hc": 0.0073065480613598716,
        "hd": 0.010959822092039809,
        "he": 6.479081493410867,
        "hf": 0.0018266370153399679,
        "hg": 0.0073065480613598716,
        "hh": 0.0018266370153399679,
        "hi": 1.9197955031223064,
        "hj": 0.0,
        "hk": 0.0,
        "hl": 0.012786459107379775,
        "hm": 0.0018266370153399679,
        "hn": 0.0018266370153399679,
        "ho": 4.698110403454398,
        "hp": 0.0036532740306799358,
        "hq": 0.0018266370153399679,
        "hr": 0.010959822092039809,
        "hs": 0.0073065480613598716,
        "ht": 0.0054799110460199045,
        "hu": 1.536201729900913,
        "hv": 0.0036532740306799358,
        "hw": 0.010959822092039809,
        "hx": 0.0,
        "hy": 5.171209390427449,
        "hz": 0.0,
        "ia": 0.1077715839050581,
        "ib": 0.07306548061359872,
        "ic": 0.5900037559548097,
        "id": 0.7489211762893868,
        "ie": 0.0054799110460199045,
        "if": 0.027399555230099522,
        "ig": 0.20640998273341638,
        "ih": 0.012786459107379775,
        "ii": 0.0073065480613598716,
        "ij": 0.012786459107379775,
        "ik": 0.02557291821475955,
        "il": 0.6539360514917085,
        "im": 3.187481591768244,
        "in": 14.777493454100341,
        "io": 0.29226192245439486,
        "ip": 0.05845238449087897,
        "iq": 0.0036532740306799358,
        "ir": 1.2037537931090387,
        "is": 1.6421466767906312,
        "it": 0.31600820365381443,
        "iu": 0.010959822092039809,
        "iv": 0.0511458364295191,
        "iw": 0.02557291821475955,
        "ix": 0.031052829260779454,
        "iy": 0.0036532740306799358,
        "iz": 0.03287946627611942,
        "ja": 1.6366667657446112,
        "jb": 0.0,
        "jc": 0.0054799110460199045,
        "jd": 0.0,
        "je": 0.803720286749586,
        "jf": 0.0,
        "jg": 0.0036532740306799358,
        "jh": 0.010959822092039809,
        "ji": 0.4694457129423718,
        "jj": 0.0,
        "jk": 0.0,
        "jl": 0.0,
        "jm": 0.0018266370153399679,
        "jn": 0.014613096122719743,
        "jo": 1.0083036324676624,
        "jp": 0.0,
        "jq": 0.0,
        "jr": 0.0018266370153399679,
        "js": 0.0018266370153399679,
        "jt": 0.0018266370153399679,
        "ju": 1.2165402522164186,
        "jv": 0.0,
        "jw": 0.0018266370153399679,
        "jx": 0.0,
        "jy": 0.0073065480613598716,
        "jz": 0.0,
        "ka": 1.5069755376554737,
        "kb": 0.0054799110460199045,
        "kc": 0.0036532740306799358,
        "kd": 0.0,
        "ke": 1.3334450211981768,
        "kf": 0.0,
        "kg": 0.0054799110460199045,
        "kh": 0.2612090931936154,
        "ki": 1.5672545591616924,
        "kj": 0.0054799110460199045,
        "kk": 0.0,
        "kl": 0.1936235236260366,
        "km": 0.0073065480613598716,
        "kn": 0.6959487028445277,
        "ko": 0.7781473685348264,
        "kp": 0.0054799110460199045,
        "kq": 0.0,
        "kr": 0.2886086484237149,
        "ks": 0.0073065480613598716,
        "kt": 0.0036532740306799358,
        "ku": 0.3233147517151743,
        "kv": 0.029226192245439486,
        "kw": 0.03653274030679936,
        "kx": 0.0,
        "ky": 0.1589174203345772,
        "kz": 0.0,
        "la": 5.273501063286488,
        "lb": 0.00913318507669984,
        "lc": 0.010959822092039809,
        "ld": 0.0054799110460199045,
        "le": 3.4249444037624395,
        "lf": 0.0018266370153399679,
        "lg": 0.0036532740306799358,
        "lh": 0.012786459107379775,
        "li": 4.184825402143867,
        "lj": 0.0,
        "lk": 0.0,
        "ll": 0.03287946627611942,
        "lm": 0.0018266370153399679,
        "ln": 0.0054799110460199045,
        "lo": 3.0121244382956074,
        "lp": 0.0036532740306799358,
        "lq": 0.0,
        "lr": 0.0054799110460199045,
        "ls": 0.0054799110460199045,
        "lt": 0.0036532740306799358,
        "lu": 1.5636012851310126,
        "lv": 0.0073065480613598716,
        "lw": 0.00913318507669984,
        "lx": 0.0036532740306799358,
        "ly": 0.6868155177678279,
        "lz": 0.0,
        "ma": 9.220863653436158,
        "mb": 0.020093007168739647,
        "mc": 0.01643973313805971,
        "md": 0.0073065480613598716,
        "me": 7.193296566408794,
        "mf": 0.0073065480613598716,
        "mg": 0.00913318507669984,
        "mh": 0.012786459107379775,
        "mi": 7.92212473552944,
        "mj": 0.0,
        "mk": 0.0073065480613598716,
        "ml": 0.0073065480613598716,
        "mm": 0.0073065480613598716,
        "mn": 0.06027902150621894,
        "mo": 6.515614233717666,
        "mp": 0.01643973313805971,
        "mq": 0.0,
        "mr": 0.012786459107379775,
        "ms": 0.01643973313805971,
        "mt": 0.01643973313805971,
        "mu": 3.4523439589925395,
        "mv": 0.0018266370153399679,
        "mw": 0.0054799110460199045,
        "mx": 0.0018266370153399679,
        "my": 1.6403200397752913,
        "mz": 0.0036532740306799358,
        "na": 2.1499517670551422,
        "nb": 0.0036532740306799358,
        "nc": 0.0018266370153399679,
        "nd": 0.0036532740306799358,
        "ne": 3.530889350652158,
        "nf": 0.0,
        "ng": 0.014613096122719743,
        "nh": 0.0036532740306799358,
        "ni": 1.6238803066372314,
        "nj": 0.0036532740306799358,
        "nk": 0.0,
        "nl": 0.0018266370153399679,
        "nm": 0.0018266370153399679,
        "nn": 0.0018266370153399679,
        "no": 15.910008403611121,
        "np": 0.0054799110460199045,
        "nq": 0.0,
        "nr": 0.0054799110460199045,
        "ns": 0.0036532740306799358,
        "nt": 0.0036532740306799358,
        "nu": 1.1032887572653405,
        "nv": 0.0018266370153399679,
        "nw": 0.0,
        "nx": 0.0,
        "ny": 0.20823661974875632,
        "nz": 0.0,
        "oa": 0.17353051645729695,
        "ob": 1.2439398074465182,
        "oc": 1.0101302694830023,
        "od": 0.4219531505435326,
        "oe": 0.21919644184079617,
        "of": 0.33062129977653415,
        "og": 0.10046503584369824,
        "oh": 0.042012651352819265,
        "oi": 0.19545016064137657,
        "oj": 0.0054799110460199045,
        "ok": 0.08950521375165843,
        "ol": 0.6667225105990884,
        "om": 0.5260714604179108,
        "on": 0.5936570299854896,
        "oo": 0.34340775888391395,
        "op": 1.360844576428276,
        "oq": 0.0036532740306799358,
        "or": 2.4166407712947775,
        "os": 1.0539695578511614,
        "ot": 0.4091666914361528,
        "ou": 3.592995009173717,
        "ov": 7.36500044585075,
        "ow": 0.12421131704311782,
        "ox": 0.7105617989672476,
        "oy": 0.06941220658291879,
        "oz": 0.09315848778233837,
        "pa": 10.537868941496274,
        "pb": 0.0036532740306799358,
        "pc": 0.00913318507669984,
        "pd": 0.0073065480613598716,
        "pe": 7.96413738688226,
        "pf": 0.027399555230099522,
        "pg": 0.0054799110460199045,
        "ph": 5.439725031682425,
        "pi": 3.857857376398012,
        "pj": 0.0,
        "pk": 0.010959822092039809,
        "pl": 4.003988337625209,
        "pm": 0.0073065480613598716,
        "pn": 0.31966147768449443,
        "po": 7.618902990983006,
        "pp": 0.021919644184079618,
        "pq": 0.0018266370153399679,
        "pr": 16.876299384725964,
        "ps": 2.453173511601577,
        "pt": 0.42012651352819264,
        "pu": 2.7618751671940314,
        "pv": 0.0018266370153399679,
        "pw": 0.0054799110460199045,
        "px": 0.0,
        "py": 1.318831925075457,
        "pz": 0.0,
        "qa": 0.029226192245439486,
        "qb": 0.0,
        "qc": 0.0,
        "qd": 0.0,
        "qe": 0.0073065480613598716,
        "qf": 0.0,
        "qg": 0.0,
        "qh": 0.0018266370153399679,
        "qi": 0.020093007168739647,
        "qj": 0.0,
        "qk": 0.0,
        "ql": 0.0018266370153399679,
        "qm": 0.0018266370153399679,
        "qn": 0.0018266370153399679,
        "qo": 0.0054799110460199045,
        "qp": 0.0018266370153399679,
        "qq": 0.0018266370153399679,
        "qr": 0.0036532740306799358,
        "qs": 0.0018266370153399679,
        "qt": 0.012786459107379775,
        "qu": 3.178348406691544,
        "qv": 0.0018266370153399679,
        "qw": 0.0,
        "qx": 0.0,
        "qy": 0.0018266370153399679,
        "qz": 0.0,
        "ra": 4.003988337625209,
        "rb": 0.0018266370153399679,
        "rc": 0.014613096122719743,
        "rd": 0.0018266370153399679,
        "re": 18.81253462098633,
        "rf": 0.010959822092039809,
        "rg": 0.0073065480613598716,
        "rh": 1.260379540584578,
        "ri": 1.883262762815507,
        "rj": 0.0,
        "rk": 0.0,
        "rl": 0.0054799110460199045,
        "rm": 0.0054799110460199045,
        "rn": 0.0036532740306799358,
        "ro": 2.9244458615592888,
        "rp": 0.0054799110460199045,
        "rq": 0.0,
        "rr": 0.0018266370153399679,
        "rs": 0.0054799110460199045,
        "rt": 0.0073065480613598716,
        "ru": 1.6275335806679114,
        "rv": 0.0018266370153399679,
        "rw": 0.0054799110460199045,
        "rx": 0.0,
        "ry": 0.06393229553689887,
        "rz": 0.0,
        "sa": 6.0224222395758735,
        "sb": 0.00913318507669984,
        "sc": 5.66805465859992,
        "sd": 0.012786459107379775,
        "se": 8.371477441303073,
        "sf": 0.023746281199419583,
        "sg": 0.01643973313805971,
        "sh": 4.478913961613602,
        "si": 3.8085381769838333,
        "sj": 0.00913318507669984,
        "sk": 1.3170052880601169,
        "sl": 2.0695797383801837,
        "sm": 0.9516778849921234,
        "sn": 1.426603508980515,
        "so": 3.98206869344113,
        "sp": 6.285457969784829,
        "sq": 0.966290981114843,
        "sr": 0.03287946627611942,
        "ss": 0.014613096122719743,
        "st": 8.924948456951084,
        "su": 12.5453430213549,
        "sv": 0.05297247344485907,
        "sw": 1.4850558934713938,
        "sx": 0.0,
        "sy": 2.323482283512439,
        "sz": 0.0073065480613598716,
        "ta": 4.825974994528195,
        "tb": 0.0073065480613598716,
        "tc": 0.047492562398839165,
        "td": 0.0036532740306799358,
        "te": 5.492697505127284,
        "tf": 0.0018266370153399679,
        "tg": 0.0054799110460199045,
        "th": 4.955666222617333,
        "ti": 2.3654949348652585,
        "tj": 0.012786459107379775,
        "tk": 0.0036532740306799358,
        "tl": 0.014613096122719743,
        "tm": 0.012786459107379775,
        "tn": 0.0073065480613598716,
        "to": 3.876123746551412,
        "tp": 0.014613096122719743,
        "tq": 0.0,
        "tr": 8.685659007941547,
        "ts": 0.13882441316583757,
        "tt": 0.0018266370153399679,
        "tu": 2.4020276751720577,
        "tv": 0.0018266370153399679,
        "tw": 0.684988880752488,
        "tx": 0.0036532740306799358,
        "ty": 0.739787991212687,
        "tz": 0.06758556956757882,
        "ua": 0.012786459107379775,
        "ub": 0.06393229553689887,
        "uc": 0.01643973313805971,
        "ud": 0.0511458364295191,
        "ue": 0.0018266370153399679,
        "uf": 0.012786459107379775,
        "ug": 0.06393229553689887,
        "uh": 0.014613096122719743,
        "ui": 0.03653274030679936,
        "uj": 0.0018266370153399679,
        "uk": 0.027399555230099522,
        "ul": 0.7470945392740469,
        "um": 0.32879466276119423,
        "un": 36.79942931103899,
        "uo": 0.0,
        "up": 1.441216605103235,
        "uq": 0.0,
        "ur": 1.2676860886459378,
        "us": 0.29226192245439486,
        "ut": 0.2904352854390549,
        "uu": 0.0018266370153399679,
        "uv": 0.07854539165961862,
        "uw": 0.0,
        "ux": 0.020093007168739647,
        "uy": 0.0,
        "uz": 0.012786459107379775,
        "va": 2.3307888315737992,
        "vb": 0.0018266370153399679,
        "vc": 0.0018266370153399679,
        "vd": 0.0018266370153399679,
        "ve": 2.9609786018660884,
        "vf": 0.0,
        "vg": 0.0018266370153399679,
        "vh": 0.0,
        "vi": 2.959151964850748,
        "vj": 0.0,
        "vk": 0.0,
        "vl": 0.010959822092039809,
        "vm": 0.0036532740306799358,
        "vn": 0.0,
        "vo": 1.1544345936948597,
        "vp": 0.0018266370153399679,
        "vq": 0.0,
        "vr": 0.03835937732213933,
        "vs": 0.0036532740306799358,
        "vt": 0.0018266370153399679,
        "vu": 0.24842263408623563,
        "vv": 0.0036532740306799358,
        "vw": 0.0,
        "vx": 0.0,
        "vy": 0.0073065480613598716,
        "vz": 0.0,
        "wa": 3.2824667165659225,
        "wb": 0.0018266370153399679,
        "wc": 0.0018266370153399679,
        "wd": 0.0018266370153399679,
        "we": 1.607440573499172,
        "wf": 0.0018266370153399679,
        "wg": 0.0018266370153399679,
        "wh": 2.005647442843285,
        "wi": 2.3910678530800182,
        "wj": 0.0018266370153399679,
        "wk": 0.0036532740306799358,
        "wl": 0.014613096122719743,
        "wm": 0.0036532740306799358,
        "wn": 0.0,
        "wo": 1.8028907341405485,
        "wp": 0.0018266370153399679,
        "wq": 0.0,
        "wr": 0.6411495923843288,
        "ws": 0.0018266370153399679,
        "wt": 0.0018266370153399679,
        "wu": 0.12055804301243787,
        "wv": 0.0,
        "ww": 0.0,
        "wx": 0.0,
        "wy": 0.08950521375165843,
        "wz": 0.0,
        "xa": 0.2173698048254562,
        "xb": 0.0,
        "xc": 0.0054799110460199045,
        "xd": 0.0036532740306799358,
        "xe": 0.33062129977653415,
        "xf": 0.0,
        "xg": 0.0,
        "xh": 0.0,
        "xi": 0.1022916728590382,
        "xj": 0.0,
        "xk": 0.0,
        "xl": 0.0,
        "xm": 0.0036532740306799358,
        "xn": 0.0,
        "xo": 0.00913318507669984,
        "xp": 0.0,
        "xq": 0.0,
        "xr": 0.0054799110460199045,
        "xs": 0.0018266370153399679,
        "xt": 0.0,
        "xu": 0.0036532740306799358,
        "xv": 0.0054799110460199045,
        "xw": 0.0018266370153399679,
        "xx": 0.012786459107379775,
        "xy": 0.22102307885613612,
        "xz": 0.0,
        "ya": 0.7215216210592873,
        "yb": 0.0018266370153399679,
        "yc": 0.00913318507669984,
        "yd": 0.0054799110460199045,
        "ye": 0.5187649123565509,
        "yf": 0.0054799110460199045,
        "yg": 0.0054799110460199045,
        "yh": 0.0018266370153399679,
        "yi": 0.1022916728590382,
        "yj": 0.0,
        "yk": 0.0,
        "yl": 0.0054799110460199045,
        "ym": 0.0036532740306799358,
        "yn": 0.0036532740306799358,
        "yo": 0.46213916488101187,
        "yp": 0.01643973313805971,
        "yq": 0.0018266370153399679,
        "yr": 0.0054799110460199045,
        "ys": 0.0018266370153399679,
        "yt": 0.042012651352819265,
        "yu": 0.1662239683959371,
        "yv": 0.0018266370153399679,
        "yw": 0.0036532740306799358,
        "yx": 0.0,
        "yy": 0.0,
        "yz": 0.0,
        "za": 0.401860143374793,
        "zb": 0.0,
        "zc": 0.0,
        "zd": 0.0,
        "ze": 0.4109933284514928,
        "zf": 0.0,
        "zg": 0.0,
        "zh": 0.0036532740306799358,
        "zi": 0.44935270577363207,
        "zj": 0.0,
        "zk": 0.0,
        "zl": 0.00913318507669984,
        "zm": 0.0018266370153399679,
        "zn": 0.0018266370153399679,
        "zo": 0.8420796640717253,
        "zp": 0.0,
        "zq": 0.0,
        "zr": 0.0,
        "zs": 0.0018266370153399679,
        "zt": 0.0,
        "zu": 0.06758556956757882,
        "zv": 0.0,
        "zw": 0.01826637015339968,
        "zx": 0.0,
        "zy": 0.3233147517151743,
        "zz": 0.0
    })
}
"""
This dictionary maps for each game mode each valid token to its frequency as the first token in an english word. It is
calculated by multiplying the frequency with the total token count. This results in scores around 1, with scores below 1
meaning that this token occurs less than average as the first token, and scores above 1 meaning that this token occurs
more than average as the first token.

Other languages will have their own score maps.
Source: https://github.com/dwyl/english-words/raw/refs/heads/master/words_alpha.txt
"""

# german word list: https://gist.github.com/MarvinJWendt/2f4f4154b8ae218600eb091a5706b5f4/raw/36b70dd6be330aa61cd4d4cdfda6234dcb0b8784/wordlist-german.txt
# french word list: https://github.com/hbenbel/French-Dictionary/raw/refs/heads/master/dictionary/dictionary.csv
# spanish word list: https://github.com/keepassxreboot/keepassxc/files/12651434/Diccionario.Espanol.136k.palabras.txt

class LanguageInfo(BaseModel):
    code: str = Field(max_length=2, min_length=2)
    allowed_word_regex: str
    first_token_scores: dict[GameMode, dict[str, float]] = Field(default=EN_FIRST_TOKEN_SCORES)  # fallback to english
    score_threshold: dict[GameMode, float] = Field(default={GameMode.NORMAL: 0.05, GameMode.HARD: 0.05})

class Language(Enum):
    """
    An enumeration of the languages supported by the bot.
    """
    # Latin script
    ENGLISH = LanguageInfo(code="en", allowed_word_regex=EN_REGEX, first_token_scores=EN_FIRST_TOKEN_SCORES)
    FRENCH = LanguageInfo(code='fr', allowed_word_regex=FR_REGEX)
    GERMAN = LanguageInfo(code='de', allowed_word_regex=DE_REGEX)
    DUTCH = LanguageInfo(code='nl', allowed_word_regex=NL_REGEX)
    LUXEMBOURGISH = LanguageInfo(code='lb', allowed_word_regex=DE_REGEX)
    SPANISH = LanguageInfo(code='es', allowed_word_regex=ES_REGEX)
    PORTUGUESE = LanguageInfo(code='pt', allowed_word_regex=PT_REGEX)
    ITALIAN = LanguageInfo(code='it', allowed_word_regex=IT_REGEX)
    CATALAN = LanguageInfo(code='ca', allowed_word_regex=FR_REGEX)
    GALICIAN = LanguageInfo(code='gl', allowed_word_regex=FR_REGEX)
    DANISH = LanguageInfo(code='da', allowed_word_regex=NN_REGEX)
    NORWEGIAN = LanguageInfo(code='no', allowed_word_regex=NN_REGEX)
    SWEDISH = LanguageInfo(code='sv', allowed_word_regex=SV_REGEX)
    ICELANDIC = LanguageInfo(code='is', allowed_word_regex=IS_REGEX)
    FAROESE = LanguageInfo(code='fo', allowed_word_regex=IS_REGEX)
    POLISH = LanguageInfo(code='pl', allowed_word_regex=PL_REGEX)
    CZECH = LanguageInfo(code='cs', allowed_word_regex=CS_REGEX)
    SLOVAK = LanguageInfo(code='sk', allowed_word_regex=CS_REGEX)
    SLOVENE = LanguageInfo(code='sl', allowed_word_regex=SS_REGEX)
    CROATIAN = LanguageInfo(code='hr', allowed_word_regex=SS_REGEX)
    BOSNIAN = LanguageInfo(code='bs', allowed_word_regex=SS_REGEX)
    SERBIAN = LanguageInfo(code='sr', allowed_word_regex=SS_REGEX)
    HUNGARIAN = LanguageInfo(code='hu', allowed_word_regex=HU_REGEX)
    ROMANIAN = LanguageInfo(code='ro', allowed_word_regex=RO_REGEX)
    ALBANIAN = LanguageInfo(code='sq', allowed_word_regex=SQ_REGEX)
    IRISH = LanguageInfo(code='ga', allowed_word_regex=GA_REGEX)
    SCOTTISH_GAELIC = LanguageInfo(code='gd', allowed_word_regex=GD_REGEX)
    WELSH = LanguageInfo(code='cy', allowed_word_regex=CY_REGEX)
    BRETON = LanguageInfo(code='br', allowed_word_regex=FR_REGEX)
    BASQUE = LanguageInfo(code='eu', allowed_word_regex=ES_REGEX)
    MALTESE = LanguageInfo(code='mt', allowed_word_regex=MT_REGEX)
    TURKISH = LanguageInfo(code='tr', allowed_word_regex=TR_REGEX)

    @classmethod
    def from_language_code(cls, code: str):
        matches = [e for e in cls if e.value.code == code]
        if matches:
            return matches[0]
        else:
            raise ValueError(f'no language found for code "{code}"')
